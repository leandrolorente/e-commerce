<header class="header">
  <div class="container header-content">
    <!-- Logo -->
    <a routerLink="/" class="logo">
      <div class="logo-icon">ğŸ¨</div>
      <div class="logo-text">
        <h1>Guarana Tatto</h1>
        <span class="logo-subtitle">EstÃºdio de Arte</span>
      </div>
    </a>

    <!-- Desktop Navigation -->
    <nav class="nav-desktop">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="nav-link">InÃ­cio</a>
      <a routerLink="/tattoos" routerLinkActive="active" class="nav-link">Tatuagens</a>
      <a routerLink="/tattoos/body-map" routerLinkActive="active" class="nav-link">Ãreas do Corpo</a>
      <a routerLink="/products" routerLinkActive="active" class="nav-link">Produtos</a>
      <a routerLink="/booking" routerLinkActive="active" class="nav-link">Agendar</a>
    </nav>

    <!-- Actions -->
    <div class="header-actions">
      <!-- Cart Button -->
      @if (isAuthenticated()) {
        <div class="cart-container">
          <button
            (click)="toggleCartDropdown()"
            class="icon-btn cart-btn"
            type="button"
          >
            ğŸ›’
            @if (cartItemCount() > 0) {
              <span class="badge">{{ cartItemCount() }}</span>
            }
          </button>

          <!-- Cart Dropdown -->
          @if (showCartDropdown()) {
            <div class="cart-dropdown">
              <div class="cart-dropdown-header">
                <h3>Meu Carrinho</h3>
                <button (click)="closeCartDropdown()" class="close-btn">âœ•</button>
              </div>

              @if (cartItems().length === 0) {
                <div class="empty-cart">
                  <span class="empty-icon">ğŸ›’</span>
                  <p>Seu carrinho estÃ¡ vazio</p>
                </div>
              } @else {
                <div class="cart-items">
                  @for (item of cartItems(); track item.product.id) {
                    <div class="cart-item">
                      <img [src]="item.product.images[0]" [alt]="item.product.name" class="item-image">
                      <div class="item-details">
                        <h4 class="item-name">{{ item.product.name }}</h4>
                        <p class="item-quantity">Qtd: {{ item.quantity }}</p>
                        <p class="item-price">{{ item.product.price * item.quantity | currency: 'BRL' }}</p>
                      </div>
                      <button
                        (click)="removeFromCart(item.product.id)"
                        class="remove-btn"
                        title="Remover"
                      >
                        ğŸ—‘ï¸
                      </button>
                    </div>
                  }
                </div>

                <div class="cart-dropdown-footer">
                  <div class="total">
                    <span>Total:</span>
                    <strong>{{ cartTotal() | currency: 'BRL' }}</strong>
                  </div>
                  <button (click)="goToCart()" class="btn btn-primary btn-block">
                    Ver Carrinho Completo
                  </button>
                </div>
              }
            </div>
          }
        </div>

        @if (isAdmin()) {
          <a routerLink="/admin" class="btn btn-admin">Admin</a>
        }
        <button (click)="onLogout()" class="btn btn-outline">Sair</button>
      } @else {
        <a routerLink="/auth/login" class="btn btn-outline">Entrar</a>
        <a routerLink="/auth/register" class="btn btn-primary">Cadastrar</a>
      }

      <!-- Mobile Menu Toggle -->
      <button class="mobile-menu-btn" (click)="toggleMobileMenu()" type="button">
        @if (showMobileMenu()) {
          âœ•
        } @else {
          â˜°
        }
      </button>
    </div>
  </div>

  <!-- Mobile Menu -->
  @if (showMobileMenu()) {
    <div class="mobile-menu">
      <a routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{exact: true}" class="mobile-link" (click)="closeMobileMenu()">ğŸ  InÃ­cio</a>
      <a routerLink="/tattoos" routerLinkActive="active" class="mobile-link" (click)="closeMobileMenu()">ğŸ¨ Tatuagens</a>
      <a routerLink="/tattoos/body-map" routerLinkActive="active" class="mobile-link" (click)="closeMobileMenu()">ğŸ“ Ãreas do Corpo</a>
      <a routerLink="/products" routerLinkActive="active" class="mobile-link" (click)="closeMobileMenu()">ğŸ›ï¸ Produtos</a>
      <a routerLink="/booking" routerLinkActive="active" class="mobile-link" (click)="closeMobileMenu()">ğŸ“… Agendar</a>

      @if (isAuthenticated()) {
        @if (isAdmin()) {
          <a routerLink="/admin" class="mobile-link" (click)="closeMobileMenu()">âš™ï¸ Admin</a>
        }
        <button (click)="onLogout(); closeMobileMenu()" class="mobile-link mobile-btn">ğŸšª Sair</button>
      } @else {
        <a routerLink="/auth/login" class="mobile-link" (click)="closeMobileMenu()">ğŸ”‘ Entrar</a>
        <a routerLink="/auth/register" class="mobile-link mobile-link-primary" (click)="closeMobileMenu()">ğŸ“ Cadastrar</a>
      }
    </div>
  }
</header>
